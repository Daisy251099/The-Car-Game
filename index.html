<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Driving Direction Game</title>
    
        <!-- Favicon for the tab bar -->
        <link rel="icon" type="image/png" href="images/favicon.png">
        <link rel="apple-touch-icon" href="images/favicon.png"><!-- PNG Favicon -->
        <!-- If using .ico -->
        <!-- <link rel="icon" type="image/x-icon" href="images/favicon.ico"> -->
    
        <!-- Other head content like stylesheets, etc. -->
    </head>
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Driving Direction Game</title>
    <style>
        :root {
            --title-color: #4CAF50; /* Title color */
            --button-bg-color: #4CAF50; /* Button background color */
            --button-hover-color: #45a049; /* Button hover color */
            --text-color: #333; /* Light mode text color */
            --text-dark-color: #f2f2f2; /* Dark mode text color */
            --bg-light: #f2f2f2; /* Light mode background color */
            --bg-dark: #333; /* Dark mode background color */
        }

        /* Basic Styling */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            background-color: var(--bg-light);
            color: var(--text-color);
            transition: background-color 0.5s, color 0.5s; /* Smooth transition for dark mode */
        }

        .dark-mode {
            background-color: var(--bg-dark);
            color: var(--text-dark-color);
        }

        /* Title Styling */
        .title {
            font-size: 36px;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            margin: 20px 0;
            color: var(--button-bg-color); /* Match title color with button color */
        }

        /* Splash Screen Styling */
        .splash-screen {
            display: flex;
            justify-content: center;
            align-items: center;
            position: absolute;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            font-size: 36px;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            cursor: pointer;
            transition: opacity 0.5s ease;
            z-index: 1000;
        }

        /* Button Styles */
        .button {
            padding: 10px;
            font-size: 18px;
            background-color: var(--button-bg-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            min-width: 120px;
            height: 50px;
            transition: transform 0.2s ease;
        }

        /* Remove hover effect */
        .button:hover {
            transform: scale(1.05);
        }

        /* Start Again and Settings Button positioning */
        .side-buttons {
            position: absolute;
            top: 90px; /* Adjusted to lower buttons further down */
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .start-again-button {
            position: absolute;
            top: 90px; /* Adjusted to align with settings button */
            left: 20px;
            right: auto; /* Reset right positioning */
        }

        .settings-button {
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
        }

        /* Directions and Log */
        .current-direction, .log {
            margin-top: 60px; /* Increased margin for more space */
            width: 90%;
            text-align: center;
            font-size: 20px;
            transition: opacity 0.5s;
        }

        .current-direction {
            font-size: 28px;
            font-weight: bold;
        }

        /* Flex Layouts */
        .roundabouts {
            margin-top: 20px;
            text-align: center;
        }

        .roundabout-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Modal Styling */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.4);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            width: 300px;
            text-align: left;
        }

        .close {
            float: right;
            font-size: 28px;
            cursor: pointer;
        }

        /* Input and Labels */
        label {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .no-animation .button {
            transition: none;
        }
    </style>
</head>
<body>

    <div class="splash-screen" id="splashScreen">I'm ready to drive!</div> <!-- Splash Screen -->

    <div class="title">Driving Direction Game</div>

    <!-- Side Buttons for Start Again and Settings -->
    <button id="startAgainButton" class="button start-again-button" aria-label="Start Again">Start Again</button>
    <div class="side-buttons">
        <button id="settingsButton" class="settings-button" aria-label="Open Settings">⚙️</button>
    </div>

    <div class="current-direction" id="currentDirection">Start Your Engine!</div>

    <button id="directionButton" class="button" aria-label="Get Direction">Get Direction</button>

    <div class="roundabouts">
        <h3>Roundabouts</h3>
        <div class="roundabout-buttons">
            <button id="roundabout2" class="button" aria-label="Roundabout with 2 exits">2 Exits</button>
            <button id="roundabout3" class="button" aria-label="Roundabout with 3 exits">3 Exits</button>
            <button id="roundabout4" class="button" aria-label="Roundabout with 4 exits">4 Exits</button>
            <button id="roundabout5" class="button" aria-label="Roundabout with 5 exits">5 Exits</button>
        </div>
    </div>

    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <span id="closeModal" class="close">&times;</span>
            <h2>Settings</h2>
            <label>
                <input type="checkbox" id="toggleSound" checked> Engine Sound
            </label>
            <label>
                <input type="checkbox" id="toggleBeep"> Beep Beep
            </label>
            <label>
                <input type="checkbox" id="toggleGPSVoice" checked> GPS Voice
            </label>
            <label>
                <input type="color" id="buttonColorPicker"> Button Color
            </label>
            <label>
                <input type="checkbox" id="toggleDarkMode"> Dark Mode
            </label>
        </div>
    </div>

    <!-- Audio Elements -->
    <audio id="startSound" src="sounds/engine-start.mp3"></audio>
    <audio id="beepSound" src="sounds/beep.mp3"></audio>
    <audio id="gpsLeft" src="sounds/gps-left.mp3"></audio>
    <audio id="gpsRight" src="sounds/gps-right.mp3"></audio>
    <audio id="gpsStraight" src="sounds/gps-straight.mp3"></audio>
    <audio id="gpsExit1" src="sounds/gps-exit-1.mp3"></audio>
    <audio id="gpsExit2" src="sounds/gps-exit-2.mp3"></audio>
    <audio id="gpsExit3" src="sounds/gps-exit-3.mp3"></audio>
    <audio id="gpsExit4" src="sounds/gps-exit-4.mp3"></audio>
    <audio id="gpsExit5" src="sounds/gps-exit-5.mp3"></audio>

    <div class="log" id="log"></div> <!-- Log -->

    <script>
        const directions = ['Left', 'Right', 'Straight'];
        let log = []; // Stores direction history
        let soundsEnabled = true;
        let gpsVoiceEnabled = true;
        let beepEnabled = false;
        let darkModeEnabled = false;

        const currentDirectionElement = document.getElementById('currentDirection');
        const logElement = document.getElementById('log');
        const splashScreen = document.getElementById('splashScreen');

        /* Splash Screen Click */
        splashScreen.addEventListener('click', function () {
            this.style.opacity = 0;
            setTimeout(() => this.style.display = 'none', 500);
            if (soundsEnabled) playSound('startSound');
        });

        /* Show a direction with sound and GPS voice */
        function showDirection(direction) {
            currentDirectionElement.textContent = `Go ${direction}`;
            addDirectionToLog(`Go ${direction}`);
            playDirectionSound(direction);
            playBeepSound(); // Play beep sound if enabled
        }

        /* Play sound based on direction */
        function playDirectionSound(direction) {
            if (gpsVoiceEnabled) {
                const soundId = {
                    'Left': 'gpsLeft',
                    'Right': 'gpsRight',
                    'Straight': 'gpsStraight'
                }[direction];
                const sound = document.getElementById(soundId);
                if (sound) sound.play();
            }
        }

        /* Play beep sound if enabled */
        function playBeepSound() {
            if (beepEnabled) {
                playSound('beepSound');
            }
        }

        /* Add direction to log (prepend) */
        function addDirectionToLog(direction) {
            log.unshift(direction); // Add new direction to the start of the log array
            logElement.innerHTML = log.join('<br/>'); // Update the log display
        }

        /* Roundabout function */
        function handleRoundabout(exits) {
            const exitNumber = Math.floor(Math.random() * exits) + 1; // Random exit number
            const exitDirection = `Take the ${exitNumber}${getOrdinal(exitNumber)} exit`;
            currentDirectionElement.textContent = exitDirection;
            addDirectionToLog(exitDirection);
            playRoundaboutGPS(exitNumber);
            playBeepSound(); // Play beep sound if enabled
        }

        /* Play roundabout GPS voice */
        function playRoundaboutGPS(exit) {
            if (gpsVoiceEnabled) {
                const sound = document.getElementById(`gpsExit${exit}`);
                if (sound) sound.play();
            }
        }

        /* Get ordinal suffix for exit */
        function getOrdinal(n) {
            return ["th", "st", "nd", "rd"][n % 10] || "th";
        }

        /* Event listeners for roundabouts */
        document.getElementById('roundabout2').addEventListener('click', () => handleRoundabout(2));
        document.getElementById('roundabout3').addEventListener('click', () => handleRoundabout(3));
        document.getElementById('roundabout4').addEventListener('click', () => handleRoundabout(4));
        document.getElementById('roundabout5').addEventListener('click', () => handleRoundabout(5));

        /* Get Direction Button Event */
        document.getElementById('directionButton').addEventListener('click', function () {
            const randomDirection = directions[Math.floor(Math.random() * directions.length)];
            showDirection(randomDirection);
            playBeepSound(); // Play beep sound when direction is fetched
        });

        /* Settings Modal */
        const settingsModal = document.getElementById('settingsModal');
        document.getElementById('settingsButton').addEventListener('click', () => settingsModal.style.display = 'flex');
        document.getElementById('closeModal').addEventListener('click', () => settingsModal.style.display = 'none');

        /* Settings Change Handlers */
        document.getElementById('toggleSound').addEventListener('change', e => soundsEnabled = e.target.checked);
        document.getElementById('toggleBeep').addEventListener('change', e => beepEnabled = e.target.checked);
        document.getElementById('toggleGPSVoice').addEventListener('change', e => gpsVoiceEnabled = e.target.checked);
        document.getElementById('toggleDarkMode').addEventListener('change', e => toggleDarkMode(e.target.checked));
        document.getElementById('buttonColorPicker').addEventListener('input', e => {
            document.documentElement.style.setProperty('--button-bg-color', e.target.value);
            document.documentElement.style.setProperty('--button-hover-color', e.target.value); // Keep hover color the same
        });

        /* Toggle Dark Mode */
        function toggleDarkMode(enabled) {
            darkModeEnabled = enabled;
            document.body.classList.toggle('dark-mode', enabled);
        }

        /* Restart Game */
        document.getElementById('startAgainButton').addEventListener('click', function () {
            log = [];
            logElement.innerHTML = '';
            currentDirectionElement.textContent = 'Start Your Engine!';
            if (soundsEnabled) playSound('startSound'); // Play engine sound on restart
        });

        /* Play any sound */
        function playSound(soundId) {
            const sound = document.getElementById(soundId);
            if (sound) sound.play();
        }
    </script>
</body>
</html>
